{{!-- ./views/index.hbs --}}
{{!-- 篩選清單/start --}}
<div class="d-flex justify-content-center">
  {{!-- 月份 --}}
  <div class="dropdown text-center my-4 col-6 col-sm-3" id="dropdown">
    <button class="btn btn-secondary dropdown-toggle col" type="button" data-toggle="dropdown">
      月份
    </button>
    {{!-- if user had chosen category then double filter --}}
    {{#if queryCategory}}
    <div class="dropdown-menu">
      <a class="dropdown-item" href="/?category={{queryCategory}}">全部</a>
      <a class="dropdown-item" href='/?month=01&category={{queryCategory}}'>一月</a>
      <a class="dropdown-item" href='/?month=02&category={{queryCategory}}'>二月</a>
      <a class="dropdown-item" href='/?month=03&category={{queryCategory}}'>三月</a>
      <a class="dropdown-item" href='/?month=04&category={{queryCategory}}'>四月</a>
      <a class="dropdown-item" href='/?month=05&category={{queryCategory}}'>五月</a>
      <a class="dropdown-item" href='/?month=06&category={{queryCategory}}'>六月</a>
      <a class="dropdown-item" href='/?month=07&category={{queryCategory}}'>七月</a>
      <a class="dropdown-item" href='/?month=08&category={{queryCategory}}'>八月</a>
      <a class="dropdown-item" href='/?month=09&category={{queryCategory}}'>九月</a>
      <a class="dropdown-item" href='/?month=10&category={{queryCategory}}'>十月</a>
      <a class="dropdown-item" href='/?month=11&category={{queryCategory}}'>十一月</a>
      <a class="dropdown-item" href='/?month=12&category={{queryCategory}}'>十二月</a>
    </div>
    {{else}}
    <div class="dropdown-menu">
      <a class="dropdown-item" href="/">全部</a>
      <a class="dropdown-item" href='/?month=01'>一月</a>
      <a class="dropdown-item" href='/?month=02'>二月</a>
      <a class="dropdown-item" href='/?month=03'>三月</a>
      <a class="dropdown-item" href='/?month=04'>四月</a>
      <a class="dropdown-item" href='/?month=05'>五月</a>
      <a class="dropdown-item" href='/?month=06'>六月</a>
      <a class="dropdown-item" href='/?month=07'>七月</a>
      <a class="dropdown-item" href='/?month=08'>八月</a>
      <a class="dropdown-item" href='/?month=09'>九月</a>
      <a class="dropdown-item" href='/?month=10'>十月</a>
      <a class="dropdown-item" href='/?month=11'>十一月</a>
      <a class="dropdown-item" href='/?month=12'>十二月</a>
    </div>
    {{/if}}
  </div>
  {{!-- 類別 --}}
  <div class="dropdown text-center my-4 col-6 col-sm-3" id="dropdown">
    <button class="btn btn-secondary dropdown-toggle col" type="button" data-toggle="dropdown">
      類別
    </button>
    <div class="dropdown-menu">
      {{!-- if user had chosen month then double filter --}}
      {{#if queryMonth}}
      <a class="dropdown-item" href="/?month={{queryMonth}}">全部</a>
      <a class="dropdown-item" href='/?month={{queryMonth}}&category=home'><i class="fas fa-home"></i>&nbsp;家居物業</a>
      <a class="dropdown-item" href='/?month={{queryMonth}}&category=shuttle-van'><i
          class="fas fa-shuttle-van"></i>&nbsp;交通出行</a>
      <a class="dropdown-item" href='/?month={{queryMonth}}&category=grin-beam'><i
          class="fas fa-grin-beam"></i>&nbsp;休閒娛樂</a>
      <a class="dropdown-item" href='/?month={{queryMonth}}&category=utensils'><i
          class="fas fa-utensils"></i>&nbsp;餐飲食品</a>
      <a class="dropdown-item" href='/?month={{queryMonth}}&category=pen'><i class=" fas fa-pen"></i>&nbsp;其他</a>
      {{else}}
      <a class="dropdown-item" href="/">全部</a>
      <a class="dropdown-item" href='/?category=home'><i class="fas fa-home"></i>&nbsp;家居物業</a>
      <a class="dropdown-item" href='/?category=shuttle-van'><i class="fas fa-shuttle-van"></i>&nbsp;交通出行</a>
      <a class="dropdown-item" href='/?category=grin-beam'><i class="fas fa-grin-beam"></i>&nbsp;休閒娛樂</a>
      <a class="dropdown-item" href='/?category=utensils'><i class="fas fa-utensils"></i>&nbsp;餐飲食品</a>
      <a class="dropdown-item" href='/?category=pen'><i class=" fas fa-pen"></i>&nbsp;其他</a>
      {{/if}}
    </div>
  </div>
  {{!-- 篩選清單/end --}}
</div>

{{!-- 總金額 --}}
<div class="d-flex justify-content-center mb-4" id="total-amount">
  <span>總金額:&nbsp;</span>
  <h1>{{{totalAmount}}}</h1>
</div>

<table class="table col-12 col-sm-10 mx-auto" id="records">
  <tbody>
    {{#each records}}
    <tr>
      <th scope="row" id="category">
        <i class="fas fa-{{{this.category}}}"></i>
      </th>
      <td id="name-and-date">
        <h3>{{{this.name}}}</h3><span>{{{this.date}}}</span>
      </td>
      <td id="merchant">
        {{#if this.merchant}}
        <i class="fas fa-store"></i>&nbsp;
        {{/if}}
        {{{this.merchant}}}
      </td>
      <td id="amount">{{{this.amount}}}</td>
      <td id="modify">
        <a class="btn btn-success btn-block" href="/records/{{{this.id}}}/edit"><i class="fas fa-edit"></i>&nbsp;<span
            id="edit">修改</span></a>
        <form action="/records/{{{this.id}}}/?_method=DELETE" method="POST" style="display: inline;">
          <button onclick="return confirmDelete()" class="btn btn-danger btn btn-block" type="submit">
            <i class="fas fa-trash-alt"></i>&nbsp;<span id="delete">刪除</span>
          </button>
        </form>
      </td>
    </tr>
    {{/each}}
  </tbody>
</table>
<div class="text-center my-4">
  <a href="/records/new" class="btn btn-lg btn-warning" id="create">新增支出 </a>
</div>